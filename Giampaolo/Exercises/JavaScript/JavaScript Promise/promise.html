<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
    body {
        font-size: xx-large;
        color: white;
        background: linear-gradient(to left, green 50%, darkred 100%);
    }

    img {
        width: 620px;
    }
    </style>
</head>

<label for="girlAnswer">Do you want to marry me?</label>
<select name="answer" id="girlAnswer">
    <option value="true">Yes</option>
    <option value="false">No</option>
</select>
<button onclick="askMarriage()">Test</button>

<div id="showReaction"></div>

<body>

    <!-- JavaScript -->
    <script>
        // let promise = new Promise((resolved, reject) => {
        //     resolve('Done');
        //     reject('Failed');
        // })

        // resolve = () => {
        //     return 'Successed';
        // }

        // reject = () => {
        //     return 'Error'
        // }

        // let dataBaseResult = 'User1'
        // let promise2 = new Promise((success, fail) => {
        //     if (dataBaseResult == 'User1') {
        //         success('User1');
        //     } else {
        //         fail('No User');
        //     }
        // })

        // console.log(promise2)
        // promise2.then(result => {
        //     console.log(result)
        // }).catch(error => {
        //     console.log(error)
        // })

        /////////////////////////////////////////////////////////////////////////////////////////////////////////////
        /*
          JS Promise
          - use keyword new Promise();
          - new Promise(function(resolve, reject){...})
          - resolve(1st arg): when successful then callback resolve
          - reject(2nd arg): when failed then callback reject
          - promise always give back something
        */
        // let married = false;
        // // create promise
        // //promise for get married
        // let willGetMarried = new Promise(function (resolve, reject) {
        //     if (married) {
        //         let marriageTools = {
        //             dress: 'Suit, tie, pant',
        //             money: ' 5000 euro',
        //             ring: 'Diamond'
        //         }
        //         resolve(marriageTools);//Marriage is done
        //     } else {
        //         let problem = new Error('He is not Ready');
        //         reject(problem);//Marriage is failed
        //     }
        // });

        // // ask the girl
        // let askHer = function () {
        //     // Call the promise
        //     willGetMarried
        //         .then(function (marriageTools) {
        //             resultId.innerHTML = `
        //        My Name is Paolo. If i get married I will get these:
        //        <ul>
        //        <li>${marriageTools.dress}</li>
        //        <li> ${marriageTools.money}</li>
        //        <li> ${marriageTools.ring}</li>
        //        </ul>
        //        `;
        //         })
        //         .catch(function (problem) {
        //             console.log(problem)
        //             resultId.innerHTML = problem;
        //         });
        // }
        // askHer();





        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////




let askMarriage = () => {
    let answer = eval(girlAnswer.value);
        console.log(answer)

    let newMarriagePromise = new Promise((accept, refuse) => {
        if (answer == true) {
            let needs = {
                money: 'More than i even earn in my whole life',
                condition: 'No more parties with friends',
                picture: 'images/reaction.png'
            }
            accept(needs)
        } else {
            let problem = new Error('I got saved')
            refuse(problem)
        }
    });
        newMarriagePromise
        .then(positive)
        .catch(negative)
}

let positive = (needs) => {
            showReaction.innerHTML = `
            My name is Paolo, and this is my reaction:
            <br>
            <img src="${needs.picture}">
            <ul>
            <li><b>Conditions:</b> ${needs.condition}</li>
            <li><b>Money Needed:</b> ${needs.money}</li>
            </ul>
            `
        }

let negative = (problem) => {
            showReaction.innerHTML = `
            ${problem}
            <br>
            <img style="width: 150px" src="images/saved.png">
            `
        }

    </script>
</body>

</html>